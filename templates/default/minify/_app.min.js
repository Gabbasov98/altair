function updateBasketTotalPrice(e){var t=$(".cartForm__total .sum");e||(e=t.attr("data-price")),(e=parseFloat(e))||(e=0);var a=parseFloat(t.attr("data-min-order"));a||(a=0);var r=parseFloat($(".cartForm__deliveryTypes li.is-active").attr("data-price"));r||(r=0),t.attr("data-price",e).html(fl2str(e+r,2," ")+'<span class="fa fa-rouble"></span>'),a>0&&a>e?($(".min_order_notify").show(),$(".orderButton").addClass("disabled").attr("disabled","disabled")):($(".min_order_notify").hide(),$(".orderButton").removeClass("disabled").removeAttr("disabled"))}function updateBasketInformer(e){e>0?($(".header__basket").attr("href","/emarket/cart/"),$(".header__basket_counter").show().text(e)):($(".header__basket").attr("href","#"),$(".header__basket_counter").hide().text(""))}function catalogUpdate(e,t){var a=getQueryData(e),r=$(".items"),n=r.attr("data-url");t&&(n=r.attr("data-append-url")),n+=a,1!==sending&&(sending=1,showLoader(r),$.ajax({url:n,type:"GET",dataType:"json",success:function(e){e.error?document.location.href="?"==a?document.location.pathname:a:e.success&&(t?$(".listing__inner",r).append(e.html):(r.html(e.html),$("html, body").animate({scrollTop:$(".breadcrumbs").offset().top},1e3),"?"==a?history.pushState(null,null,document.location.pathname):history.pushState(null,null,a)),!$(".pagination-next").length||$(".pagination-next").hasClass("disabled")?$(".listing__more").hide():$(".listing__more").show())},error:function(e,t,a){console.log(t+": "+a),console.log(e)},complete:function(){sending=0,hideLoader(r)}}))}function getQueryData(e){var t=$(".listingFilter").serializeArray(),a=new Array;for(var r in t){var n=t[r];n.value&&a.push(n.name+"="+n.value)}var o=$('input[name="search_string"]');if(o.val()&&a.push("search_string="+o.eq(0).val()),!e){var i=$(".pagination li.current a").text();i--,i>0&&a.push("p="+i)}return a.length>0?"?"+a.join("&"):"?"}function isvg(e){if(e)var t=$(".isvg[data-icon]",e);else var t=$(".isvg[data-icon]");t.each(function(){var e=$(this),t="/templates/default/img/svg/"+e.attr("data-icon")+".svg";$.ajax({url:t,dataType:"html",success:function(t){e.html(t)}})})}function showLoader(e){e.addClass("loading")}function hideLoader(e){e.removeClass("loading")}function formClear(e){$('[name^="data[new]"]',e).each(function(){"radio"==$(this).attr("type")||"checkbox"==$(this).attr("type")?$(this).prop("checked",!1):$(this).val("")})}function modifyData(e){var t=$('meta[name="_token"]').attr("content");t&&(e+=""!=e?"&k="+t:"?k="+t);var a=$('meta[name="_roistat"]').attr("content");return a&&(e+=""!=e?"&roistat_id="+a:"?roistat_id="+a),e}function initAjaxForm(e,t,a){e.ajaxValidFormSender({show_loader:!0,hideForm:!0,show_errors:"global",parentErrorClass:"formGroup__error",onAjaxSendSuccess:function(e,t,r){formClear(e),a&&a(e,t,r),r.id&&"object"==typeof dataLayer&&(dataLayer.push({event:"SEND_FORM_AJAX"}),"137"==r.id?dataLayer.push({event:"SEND_FORM_RECALL"}):"142"==r.id?dataLayer.push({event:"SEND_FORM_RECALL_FROM_ITEM"}):"145"==r.id?dataLayer.push({event:"SEND_FORM_CONTACT_PAGE"}):"146"==r.id?dataLayer.push({event:"SEND_FORM_RECALL_FROM_ITEM"}):"383"==r.id?dataLayer.push({event:"SEND_FORM_OPT_PAGE"}):"588"==r.id?dataLayer.push({event:"SEND_FORM_ZAKAZ_CASE"}):"759"==r.id?dataLayer.push({event:"SEND_FORM_CASES_BUY"}):"761"==r.id?dataLayer.push({event:"SEND_FORM_LOZAMENT_WITHOUT_DATA"}):"762"==r.id&&dataLayer.push({event:"SEND_FORM_LOZAMENT"}))},onBeforeSend:function(e,t){var a=e.serialize();t.formData=modifyData(a)}})}function ajaxLink(e,t,a){showLoader(e),t||(t=e.attr("href")),$.ajax({dataType:"json",url:t,type:"GET",success:function(t){t.error?document.location.href=e.attr("href"):a&&a(t)},error:function(t,a,r){document.location.href=e.attr("href")},complete:function(){hideLoader(e)}})}function getCookie(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function fl2str(e,t,a){var r=void 0!==t?t:2,n=void 0!==a?a:"",o=parseFloat(e);if(0!=t){var i=Math.pow(10,r);o=Math.round(o*i)/i}return o=Number(o).toFixed(r).toString().split("."),b=o[0].replace(/(\d{1,3}(?=(\d{3})+(?:\.\d|\b)))/g,"$1"+n),o=0!=t?b+"."+o[1]:b}!function(e){e.fn.niceSelect=function(t){function a(t){t.after(e("<div></div>").addClass("nice-select").addClass(t.attr("class")||"").addClass(t.attr("disabled")?"disabled":"").attr("tabindex",t.attr("disabled")?null:"0").html('<span class="current"></span><ul class="list"></ul>'));var a=t.next(),r=t.find("option"),n=t.find("option:selected");a.find(".current").html(n.data("display")||n.text()),r.each(function(t){var r=e(this),n=r.data("display");a.find("ul").append(e("<li></li>").attr("data-value",r.val()).attr("data-display",n||null).addClass("option"+(r.is(":selected")?" selected":"")+(r.is(":disabled")?" disabled":"")).html(r.text()))})}if("string"==typeof t)return"update"==t?this.each(function(){var t=e(this),r=e(this).next(".nice-select"),n=r.hasClass("open");r.length&&(r.remove(),a(t),n&&t.next().trigger("click"))}):"destroy"==t?(this.each(function(){var t=e(this),a=e(this).next(".nice-select");a.length&&(a.remove(),t.css("display",""))}),0==e(".nice-select").length&&e(document).off(".nice_select")):console.log('Method "'+t+'" does not exist.'),this;this.hide(),this.each(function(){var t=e(this);t.next().hasClass("nice-select")||a(t)}),e(document).off(".nice_select"),e(document).on("click.nice_select",".nice-select",function(t){var a=e(this);e(".nice-select").not(a).removeClass("open"),a.toggleClass("open"),a.hasClass("open")?(a.find(".option"),a.find(".focus").removeClass("focus"),a.find(".selected").addClass("focus")):a.focus()}),e(document).on("click.nice_select",function(t){0===e(t.target).closest(".nice-select").length&&e(".nice-select").removeClass("open").find(".option")}),e(document).on("click.nice_select",".nice-select .option:not(.disabled)",function(t){var a=e(this),r=a.closest(".nice-select");r.find(".selected").removeClass("selected"),a.addClass("selected");var n=a.data("display")||a.text();r.find(".current").text(n),r.prev("select").val(a.data("value")).trigger("change")}),e(document).on("keydown.nice_select",".nice-select",function(t){var a=e(this),r=e(a.find(".focus")||a.find(".list .option.selected"));if(32==t.keyCode||13==t.keyCode)return a.hasClass("open")?r.trigger("click"):a.trigger("click"),!1;if(40==t.keyCode){if(a.hasClass("open")){var n=r.nextAll(".option:not(.disabled)").first();n.length>0&&(a.find(".focus").removeClass("focus"),n.addClass("focus"))}else a.trigger("click");return!1}if(38==t.keyCode){if(a.hasClass("open")){var o=r.prevAll(".option:not(.disabled)").first();o.length>0&&(a.find(".focus").removeClass("focus"),o.addClass("focus"))}else a.trigger("click");return!1}if(27==t.keyCode)a.hasClass("open")&&a.trigger("click");else if(9==t.keyCode&&a.hasClass("open"))return!1});var r=document.createElement("a").style;return r.cssText="pointer-events:auto","auto"!==r.pointerEvents&&e("html").addClass("no-csspointerevents"),this}}(jQuery),window.whatInput=function(){"use strict";function e(){r(),n(event),m=!0,b=window.setTimeout(function(){m=!1},650)}function t(e){m||n(e)}function a(e){r(),n(e)}function r(){window.clearTimeout(b)}function n(e){var t=i(e),a=y[e.type];if("pointer"===a&&(a=l(e)),v!==a){var r=s(e),n=r.nodeName.toLowerCase(),d="input"===n?r.getAttribute("type"):null;!h.hasAttribute("data-whatinput-formtyping")&&v&&"keyboard"===a&&"tab"!==k[t]&&("textarea"===n||"select"===n||"input"===n&&_.indexOf(d)<0)||$.indexOf(t)>-1||o(a)}"keyboard"===a&&c(t)}function o(e){v=e,h.setAttribute("data-whatinput",v),-1===C.indexOf(v)&&C.push(v)}function i(e){return e.keyCode?e.keyCode:e.which}function s(e){return e.target||e.srcElement}function l(e){return"number"==typeof e.pointerType?w[e.pointerType]:"pen"===e.pointerType?"touch":e.pointerType}function c(e){-1===f.indexOf(k[e])&&k[e]&&f.push(k[e])}function d(e){var t=i(e),a=f.indexOf(k[t]);-1!==a&&f.splice(a,1)}function u(){h=document.body,window.PointerEvent?(h.addEventListener("pointerdown",t),h.addEventListener("pointermove",t)):window.MSPointerEvent?(h.addEventListener("MSPointerDown",t),h.addEventListener("MSPointerMove",t)):(h.addEventListener("mousedown",t),h.addEventListener("mousemove",t),"ontouchstart"in window&&h.addEventListener("touchstart",e)),h.addEventListener(g,t),h.addEventListener("keydown",a),h.addEventListener("keyup",a),document.addEventListener("keyup",d)}function p(){return g="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"}var h,f=[],m=!1,v=null,_=["button","checkbox","file","image","radio","reset","submit"],g=p(),$=[16,17,18,91,93],y={keydown:"keyboard",keyup:"keyboard",mousedown:"mouse",mousemove:"mouse",MSPointerDown:"pointer",MSPointerMove:"pointer",pointerdown:"pointer",pointermove:"pointer",touchstart:"touch"};y[p()]="mouse";var b,C=[],k={9:"tab",13:"enter",16:"shift",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"},w={2:"touch",3:"touch",4:"mouse"};return"addEventListener"in window&&Array.prototype.indexOf&&(document.body?u():document.addEventListener("DOMContentLoaded",u)),{ask:function(){return v},keys:function(){return f},types:function(){return C},set:o}}(),function(e,t,a){function r(e){var t={},r=/^jQuery\d+$/;return a.each(e.attributes,function(e,a){a.specified&&!r.test(a.name)&&(t[a.name]=a.value)}),t}function n(e,t){var r=this,n=a(r);if(r.value==n.attr("placeholder")&&n.hasClass("placeholder"))if(n.data("placeholder-password")){if(n=n.hide().next().show().attr("id",n.removeAttr("id").data("placeholder-id")),!0===e)return n[0].value=t;n.focus()}else r.value="",n.removeClass("placeholder"),r==i()&&r.select()}function o(){var e,t=this,o=a(t),i=this.id;if(""==t.value){if("password"==t.type){if(!o.data("placeholder-textinput")){try{e=o.clone().attr({type:"text"})}catch(t){e=a("<input>").attr(a.extend(r(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":o,"placeholder-id":i}).bind("focus.placeholder",n),o.data({"placeholder-textinput":e,"placeholder-id":i}).before(e)}o=o.removeAttr("id").hide().prev().attr("id",i).show()}o.addClass("placeholder"),o[0].value=o.attr("placeholder")}else o.removeClass("placeholder")}function i(){try{return t.activeElement}catch(e){}}var s,l,c="[object OperaMini]"==Object.prototype.toString.call(e.operamini),d="placeholder"in t.createElement("input")&&!c,u="placeholder"in t.createElement("textarea")&&!c,p=a.fn,h=a.valHooks,f=a.propHooks;d&&u?(l=p.placeholder=function(){return this},l.input=l.textarea=!0):(l=p.placeholder=function(){var e=this;return e.filter((d?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":n,"blur.placeholder":o}).data("placeholder-enabled",!0).trigger("blur.placeholder"),e},l.input=d,l.textarea=u,s={get:function(e){var t=a(e),r=t.data("placeholder-password");return r?r[0].value:t.data("placeholder-enabled")&&t.hasClass("placeholder")?"":e.value},set:function(e,t){var r=a(e),s=r.data("placeholder-password");return s?s[0].value=t:r.data("placeholder-enabled")?(""==t?(e.value=t,e!=i()&&o.call(e)):r.hasClass("placeholder")?n.call(e,!0,t)||(e.value=t):e.value=t,r):e.value=t}},d||(h.input=s,f.value=s),u||(h.textarea=s,f.value=s),a(function(){a(t).delegate("form","submit.placeholder",function(){var e=a(".placeholder",this).each(n);setTimeout(function(){e.each(o)},10)})}),a(e).bind("beforeunload.placeholder",function(){a(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),$(document).ready(function(){function e(e){var t=$(window).scrollTop(),a=$("body"),r=a.data("fullrama-meta"),n=$('<div style="width: 100px; height: 100px; left: -200%; position: fixed; top: 0;"><div class="fullrama"><img src="" alt="" /></div></div>'),o=n.find(".fullrama"),i={fit:"scaledown",nav:"thumbs",allowfullscreen:!0,transitionduration:1200};a.data("fullScreenHack")||(a.append($("\t\t\t\t<style>\t\t\t        .fullscreen {\t\t\t            min-width: 100%;\t\t\t            position: relative;\t\t\t        }\t\t        </style>\t\t    ")),a.data("fullScreenHack",!0)),n.appendTo(a),o.on("fotorama:ready",function(e,t){t.requestFullScreen()}).on("fotorama:fullscreenenter",function(e,t){$(window).trigger("resize")}).on("fotorama:fullscreenexit",function(e,a){r.attr("content","initial-scale=1.0, maximum-scale=1.0, user-scalable=no").attr("content",""),a.destroy(),$(window).scrollTop(t),o.remove()}).fotorama($.extend(i,e))}$(".fotorama").fotorama(),$("body").on("click",function(){$(".formGroup .formGroup__el").each(function(){""!=$(this).val()?$(this).parent().addClass("hasValue"):$(this).parent().removeClass("hasValue")})}),$("input[placeholder], textarea[placeholder]").placeholder(),$(document).foundation(),$("select.select-custom").niceSelect(),$(".ie select.select-custom").niceSelect("destroy"),$("body").on("click",function(){var e=$(".dropdown-pane");e.length>0&&e.foundation("close")}),$(".header__search_button").on("click",function(e){e.preventDefault(),$(".header__search").addClass("active")}),$(document).mouseup(function(e){var t=$(".header__search"),a=$(".header__search_wrap_m");0===t.has(e.target).length&&t.removeClass("active"),0===a.has(e.target).length&&a.removeClass("active")}),$(".mobileSearch__toggle").on("click",function(e){e.preventDefault(),$(".header__search_wrap_m").toggleClass("active")}),$(document).on("open.zf.reveal",function(){$("html").addClass("modal_open")}),$(document).on("closed.zf.reveal",function(){$("html").removeClass("modal_open")}),function(){var e=0;$(".customTabs .tabs li").each(function(){e+=$(this).outerWidth(!0)}),$(".customTabs .tabs").css("width",e+50)}(),$(".header__toggleLeft").on("click",function(e){e.preventDefault(),$("body").toggleClass("left_open"),$("html").toggleClass("modal_open")}),$(".page_close").on("click",function(){$("body").removeClass("left_open")}),$(".mobileCatalog__o").on("click",function(e){e.preventDefault(),$("body").addClass("mobileCatalog__open"),$("html").addClass("modal_open")}),$(".mobileCatalog__c").on("click",function(e){e.preventDefault(),$("body").removeClass("mobileCatalog__open"),$("body").removeClass("left_open"),$("html").removeClass("modal_open")}),$(".simpleAction__mobile_content").owlCarousel({loop:!0,center:!1,margin:0,nav:!1,autoWidth:!0,items:1,autoHeight:!0}),$(function(){$(".js-gorama").each(function(){var t=$(this),a=t.find("a"),r=[];a.each(function(){var e=$(this);r.push({img:e.attr("href"),thumb:e.data("thumb"),full:e.find("img").data("original")})}),t.on("gorama",function(a,n){e($.extend(t.data(),{data:r,startindex:a.params.startindex}))}).on("click","a",function(e){var r=$(e.target).closest("a");e.preventDefault(),t.trigger({type:"gorama",params:{startindex:a.index(r)}})})})}),$(".listingFilter__toggle").click(function(e){$(".listingFilter__inner").slideToggle(),$(this).find(".toggle-arrow").toggleClass("fa-angle-up").toggleClass("fa-angle-down")}),$(".listing__labelsToggle").click(function(e){e.preventDefault(),$(this).hide(),$(this).closest(".listing__labels").find("a.hide").toggleClass("hide")}),
    $(".listingMenu__toggle").click(function(e){e.preventDefault(),$(this).toggleClass("opened"),$(this).hasClass("opened")?$(this).text("Свернуть"):$(this).text("Еще разделы"),$(this).closest(".listingMenu").find(".listingMenu__listHidden").slideToggle(300)}),$("#cartFormSticky").stick_in_parent()}),function(e){e.fn.ajaxValidFormSender=function(t){var a={init:function(t){return this.each(function(){var r=e(this),n=r.data("avfd_settings");if(!n){var n=e.extend({show_loader:!0,errors:[],error_msgs:{required:{global:"Заполнены не все обязательные поля",local:"Поле обязательно для заполнения"},email:{global:"Указано неверное значение E-mail",local:"Указано неверное значение"},number:"Указано неверное значение",inn:"Указано неверное значение ИНН",ogrn:"Указано неверное значение ОГРН",bik:"Указано неверное значение БИК",maxlength:{global:"Есть поля превышающие максимальную допустимую длину",local:"Поле превышает максимальную допустимую длину"},even_one:"Одно из полей обязательно должно быть заполнено"},ajax:{need:!0,action:null,formData:null,method:r.attr("method")||"POST"},error_block:e(".error_msg",r),success_block:e(".success_msg",r),validate:!0,hideForm:!0,show_errors:"local",parentErrorClass:"input-error",onAjaxSendSuccess:function(e,t,a){},onAjaxSendComplete:function(e,t){},onBeforeSend:function(e,t){}},t||{});r.data("avfd_settings",n),e(r).on("focus","input, textarea",function(){a.clearError.call(r,e(this))}),e(r).on("change",'textarea, select, input[type="radio"], input[type="checkbox"]',function(){a.clearError.call(r,e(this))}),e('input[type="submit"],button[type="submit"]',r).on("click",function(){return a.submit.call(r)}),e(r).on("keypress",'input[type="number"], input.number, input.inn, input.ogrn, input.bik',function(e){return!(e.which>31&&(e.which<48||e.which>57)&&44!=e.which&&46!=e.which&&97!=e.which&&99!=e.which&&118!=e.which)})}})},destroy:function(){e(this).removeData("avfd_settings")},isValidDate:function(e){return new RegExp(/^[0-9][0-9]\.[0-9][0-9]\.[0-9][0-9][0-9][0-9]$/).test(e.val())},isValidNumber:function(e){return e=e.replace(/\s+/g,""),new RegExp(/^[0-9 ]+[.,]?[0-9]?$/).test(e)},isValidInn:function(e){if(e.match(/\D/))return!1;var t=e.match(/(\d)/g);return 10==t.length?t[9]==String((2*t[0]+4*t[1]+10*t[2]+3*t[3]+5*t[4]+9*t[5]+4*t[6]+6*t[7]+8*t[8])%11%10):12==t.length&&(t[10]==String((7*t[0]+2*t[1]+4*t[2]+10*t[3]+3*t[4]+5*t[5]+9*t[6]+4*t[7]+6*t[8]+8*t[9])%11%10)&&t[11]==String((3*t[0]+7*t[1]+2*t[2]+4*t[3]+10*t[4]+3*t[5]+5*t[6]+9*t[7]+4*t[8]+6*t[9]+8*t[10])%11%10))},isValidOgrn:function(e){if(e.match(/\D/))return!1;if(13!=e.length&&15!=e.length)return!1;if(13==e.length){var t=e;return t=Math.floor(t/10%11),dgt13=10==t?0:t,e[12]==dgt13}if(15==e.length){var a=e;a=Math.floor(a/10%13);var r=a%10;return e[14]==r}},isValidBik:function(e){return!e.match(/\D/)&&(9==e.length&&"04"==e.slice(0,2))},isValidEmail:function(e){return e=e.replace(/^\s+|\s+$/g,""),/^([a-zA-Zа-яА-Я_\-]+\.)*[-a-zA-Zа-яА-Я0-9_\.\-]+@([a-zA-Zа-яА-Я0-9][-a-zA-Zа-яА-Я0-9_\-]*[a-zA-Zа-яА-Я0-9]\.)+[a-zA-Zа-яА-Я]{2,4}$/i.test(e)},showError:function(t,a){var r=e(this),n=r.data("avfd_settings"),o=n.error_msgs[a];if(e.isPlainObject(o)&&(o=o[n.show_errors]),n.errors[a])var i=0;else{n.errors[a]=o;var i=1}t.each(function(){var t=e(this).parent();t.addClass(n.parentErrorClass),"global"!=n.show_errors&&t.append('<p class="error_notify">'+o+"</p>")}),"global"==n.show_errors&&i&&n.error_block.append(o+"<br>").show()},clearErrors:function(){var t=e(this),a=t.data("avfd_settings"),r=a.error_block,n=a.success_block;r.text("").hide(),n.text("").hide(),e("."+a.parentErrorClass,t).removeClass(a.parentErrorClass),e(".error_notify",t).remove(),a.errors=[]},clearError:function(t){var a=e(this),r=a.data("avfd_settings"),n=t.closest("."+r.parentErrorClass);n.removeClass(r.parentErrorClass),e(".error_notify",n).remove()},isError:function(t){var a=e(this),r=a.data("avfd_settings");return!!t.parent().is("."+r.parentErrorClass)},countCharacters:function(e){var t=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,a=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return e.replace(a,"").replace(t,function(e,t){return"".indexOf("<"+t.toLowerCase()+">")>-1?e:""}).length},validation:function(){var t=e(this);a.clearErrors.call(t);var r=!0;e('input[required][type!="radio"][type!="checkbox"], textarea[required]',t).each(function(){var n=e(this);n.attr("name")&&(n.attr("placeholder")==n.val()||n.val().length<1)&&(a.showError.call(t,n,"required"),r=!1)});var n=[];if(e('input[required][type="radio"], input[required][type="checkbox"]',t).each(function(){var t=e(this).attr("name");if(t){var a=e(this).val();n[t]||(n[t]=[]),n[t][a]=e(this)}}),n.length>0)for(var o in n){var i=!1,s=null,l=!1;for(var c in n[o]){var d=n[o][c];if((i||d.prop("checked"))&&(i=!0),!i)if(s){if(!l)for(;!l;)d.parents().each(function(){l||e(this).get(0)!=s.get(0)||(l=!0)}),l||(s.parent().length>0?s=s.parent():l=!0)}else s=d.parent()}i||(a.showError.call(t,e("*:first",s),"required"),r=!1)}e("select[required]",t).each(function(){var n=e(this);n.attr("name")&&(""!=e(n).val()&&"0"!=e(n).val()||(a.showError.call(t,n,"required"),r=!1))}),t.find('.email, input[type="email"]').each(function(){var n=e(this);n.attr("name")&&!1===a.isError.call(t,n)&&n.val()&&!a.isValidEmail.call(t,n.val())&&(a.showError.call(t,n,"email"),r=!1)}),t.find('.number, input[type="number"]').each(function(){var n=e(this);n.attr("name")&&!1===a.isError.call(t,n)&&n.val()&&!a.isValidNumber.call(t,n.val())&&(a.showError.call(t,n,"number"),r=!1)}),t.find('input[class="inn"]').each(function(){var n=e(this);n.attr("name")&&!1===a.isError.call(t,n)&&n.val()&&!a.isValidInn.call(t,n.val())&&(a.showError.call(t,n,"inn"),r=!1)}),t.find('input[class="ogrn"]').each(function(){var n=e(this);n.attr("name")&&!1===a.isError.call(t,n)&&n.val()&&!a.isValidOgrn.call(t,n.val())&&(a.showError.call(t,n,"ogrn"),r=!1)}),t.find('textarea[data-maxlength], input[type="text"][data-maxlength]').each(function(){var n=e(this),o=parseInt(n.attr("data-maxlength"));n.attr("name")&&!1===a.isError.call(t,n)&&o<a.countCharacters.call(t,n.val())&&(a.showError.call(t,n,"maxlength"),r=!1)});var u=0==t.find(".even_one").length;return t.find(".even_one").each(function(){var t=e(this);t.attr("name")&&e(t).val()&&(u=!0)}),u||(a.showError.call(t,t.find(".even_one"),"even_one"),r=!1),r},submit:function(){var t=this,r=t.data("avfd_settings");if(!1===r.validate)a.clearErrors.call(t);else if(!1===a.validation.call(t))return!1;return r.onBeforeSend(t,r),!1===r.ajax.need?(t.submit(),!1):(1!==t.data("sending")&&(t.data("sending",1),!0===r.show_loader&&showLoader(t),e.ajax({dataType:"json",url:r.ajax.action?r.ajax.action:t.attr("action"),data:r.formData?r.formData:t.serialize(),type:r.ajax.method,success:function(a){if(a.errors||a.error){if(a.errors)var n=a.errors;else var n=a.error;if(e.isArray(n)||e.isPlainObject(n)){var o="";for(var i in n)console.log(n[i]),o+=n[i]+"<br/>"}else o=n;r.error_block.html(o).show()}else a.success&&(!0===r.hideForm&&e(">*",t).fadeOut(300),a.location&&(o+="<br/>Выполняется перенаправление"),setTimeout(function(){r.success_block.html(a.success).fadeIn()},300),r.onAjaxSendSuccess(t,r,a));a.location&&setTimeout(function(){document.location.href=a.location},500)},error:function(t,a,n){if(console.log(a+": "+n),console.log(t),t&&t.responseJSON){var o=t.responseJSON;if(e.isArray(o)||e.isPlainObject(o)){var i="";for(var s in o)console.log(o[s]),i+=o[s]+"<br/>";r.error_block.html(i).show()}else r.error_block.html(error).show()}else r.error_block.html("Во время выполнения запроса возникла ошибка. Перезагрузите страницу и повторите попытку или сообщите нам об ошибке").show()},complete:function(){t.data("sending",0),hideLoader(t),r.onAjaxSendComplete(t,r)}})),!1)}};if(a[t]){a.init.apply(this,Array.prototype.slice.call(arguments,1));var r=a[t].apply(this,Array.prototype.slice.call(arguments,1));return a.destroy(),r}if("object"==typeof t||!t)return a.init.apply(this,arguments);e.error("Метод с именем "+t+" не существует для jQuery.ajaxValidFormSender")}}(jQuery),$(document).ready(function(){isvg();var e=document.location.hash;e.length>0&&e.indexOf("question_")>0&&setTimeout(function(){$(e).siblings(".accordion-title").click()},500);var t=$("input.phone");t.length>0&&t.mask("+Z (000) 000-00-00",{clearIfNotMatch:!0,placeholder:"+7/8 (___) ___-__-__",translation:{"+":{pattern:/\+/,optional:!0},Z:{pattern:/7|8/}}}),$(".load-price").on("click",function(){var e=$(this).attr("data-link"),t=$("#load_price_form");return t.attr("data-link",e),t.foundation("open"),!1}),$(document).on("open.zf.reveal",function(){$("html").addClass("modal_open")}),$(document).on("closed.zf.reveal",function(){$("html").removeClass("modal_open")}),$('form[data-request="ajax"]').each(function(){var e=$(this);initAjaxForm(e,!0,function(){if(e.closest("#load_price_form").length>0){formClear();var t=$("#load_price_form");document.location.href=t.attr("data-link"),t.foundation("hide")}})}),$("#areaSelect_1 a").on("click",function(){$("#areaSelect_sup_1").foundation("toggle")}),$("#areaSelect_2 a").on("click",function(){$("#areaSelect_sup_2").foundation("toggle")}),$("#areaSelect_3 a").on("click",function(){$("#areaSelect_sup_3").foundation("toggle")}),$(".areaSelect .areaSelect__sity a").on("click",function(e){e.preventDefault();var t=$(this).text(),a=$(this).attr("data-id"),r=new Date;r.setTime(r.getTime()+2592e6);var n="; expires="+r.toUTCString();document.cookie="current_city="+a+n+"; path=/",$(".areaSelect__sity_target span").text(t),$(".areaSelect__sity li.is-active").removeClass("is-active").find("a").removeAttr("aria-selected"),$(this).attr("aria-selected","true").parent().addClass("is-active"),$('[id^="city_phone_p"]').removeClass("is-active"),$("#city_phone_p1_"+a).addClass("is-active"),$("#city_phone_p2_"+a).addClass("is-active"),$("#city_phone_p3_"+a).addClass("is-active"),$('[id^="city_phone_p4"]').addClass("is-active"),$("#city_phone_p5_"+a).addClass("is-active"),$("#city_phone_p6_"+a).addClass("is-active"),$("#city_phone_p7_"+a).addClass("is-active"),$(".city_block").removeClass("is-active"),$(".city_block_"+a).addClass("is-active")});var a=getCookie("current_city");a||(a=$(".areaSelect .areaSelect__sity .is-active a").attr("data-id")),a&&($(".city_block").removeClass("is-active"),$(".city_block_"+a).addClass("is-active")),$("select.catalog-sort").on("change",function(){var e=new Date;e.setTime(e.getTime()+2592e6);var t="; expires="+e.toUTCString();document.cookie="catalog_sort_field="+$(this).val()+t+"; path=/",catalogUpdate(!0,!1)}),$(".listing__viewSwitch a").on("click",function(e){e.preventDefault(),$(this).toggleClass("active").siblings().removeClass("active");var t=$(".listing__inner");t.toggleClass("list-view"),t.find(".columns").toggleClass("medium-6 large-4");var a=new Date;a.setTime(a.getTime()+2592e6);var r="; expires="+a.toUTCString();document.cookie="catalog_view="+$(this).attr("data-view")+r+"; path=/"}),$(".listing__more").on("click",function(e){e.preventDefault(),$(this).hide();var t=$(".pagination-next");if(!t.length||t.hasClass("disabled"))return!1;$(".pagination .current").removeClass("current").next().addClass("current"),catalogUpdate(!1,!0)}),$(".delivery_page_more_delegates").on("click",function(e){e.preventDefault();var t=$(this).attr("href"),a=$('select[name="city"]').val();return a&&(t+="?city="+a),document.location.href=t,!1}),$(".items").on("click",".pagination a",function(e){e.preventDefault();var t=$(this).parent();if(t.hasClass("disabled")||t.hasClass("current"))return!1;t.hasClass("pagination-previous")?($(".pagination .current").removeClass("current").prev().addClass("current"),catalogUpdate(!1,!1)):t.hasClass("pagination-next")?($(".pagination .current").removeClass("current").next().addClass("current"),catalogUpdate(!1,!1)):($(".pagination .current").removeClass("current"),$(this).parent().addClass("current"),catalogUpdate(!1,!1))}).on("click",".listing_in_cart",function(e){return!1}).on("click","button.listing_to_cart",function(e){e.preventDefault();var t=$(this),a=$(this).attr("data-href"),r=$(this).closest(".columns");return showLoader(t),ajaxLink(t,a,function(e){t.toggleClass("listing_in_cart listing_to_cart button__halfGreen button__incart button__green button__small"),$("span",t).text("В корзине"),updateBasketInformer(e.summary.amount);var a=null;for(var n in e.items.item)e.items.item[n].page.id==r.attr("data-id")&&(a=e.items.item[n]);var o=$("#modal-incart");$(".cartCard__img img").attr("src",$(".listingCard__image img",r).attr("src")),$(".cartCard__title").html($(".listingCard__info .title",r).html()),$(".cartCard__art").text($(".listingCard__info .article",r).text()),$(".cartCard__item form").attr("action","/udata/emarket/basket/put/element/"+r.attr("data-id")+"/.json");var i=a.price.actual;i||(i=0);var s=a["total-price"].actual;s||(s=0),$(".cartCard__price").attr("data-price",i).html(fl2str(s,2," ")+'<span class="fa fa-rouble"></span>'),$('.modalIncart input[name="amount"]').val(a.amount),$(".cartCard__delete",o).unbind().on("click",function(e){e.preventDefault();var r="/udata/emarket/basket/remove/item/"+a.id+"/.json";ajaxLink($(this),r,function(e){updateBasketInformer(e.summary.amount),t.toggleClass("listing_in_cart listing_to_cart button__halfGreen button__incart button__green button__small"),$("span",t).text("В корзину"),$("#modal-incart").foundation("close")})}),o.foundation("open"),"object"==typeof dataLayer&&dataLayer.push({event:"CART_ADDITEM"})}),!1}),$("button.object_to_cart").on("click",function(e){e.preventDefault();var t=$(this),a=$(this).attr("data-href"),r=$(".itemCard[data-id]");return showLoader(t),ajaxLink(t,a,function(e){t.toggleClass("object_in_cart button__halfGreen object_to_cart button__green"),$("span",t).text("В корзине"),updateBasketInformer(e.summary.amount);var a=null;for(var n in e.items.item)e.items.item[n].page.id==r.attr("data-id")&&(a=e.items.item[n]);var o=$("#modal-incart"),i=$("img.mainImage");i.length>0&&$(".cartCard__img img").attr("src",i.attr("src")),$(".cartCard__title").html($(".itemCard__title").text()),$(".cartCard__art").html($(".itemCard__articul").html()),$(".cartCard__item form").attr("action","/udata/emarket/basket/put/element/"+r.attr("data-id")+"/.json");var s=a.price.actual;s||(s=0);var l=a["total-price"].actual;l||(l=0),$(".cartCard__price").attr("data-price",s).html(fl2str(l,2," ")+'<span class="fa fa-rouble"></span>'),$('.modalIncart input[name="amount"]').val(a.amount),$(".cartCard__delete").unbind().on("click",function(e){e.preventDefault();var r="/udata/emarket/basket/remove/item/"+a.id+"/.json";ajaxLink($(this),r,function(e){updateBasketInformer(e.summary.amount),t.toggleClass("object_in_cart button__halfGreen object_to_cart button__green"),$("span",t).text("Добавить в корзину"),$("#modal-incart").foundation("close")})}),o.foundation("open"),"object"==typeof dataLayer&&dataLayer.push({event:"CART_ADDITEM"})}),!1}),$(".modalIncart__continueBtn").on("click",function(e){return e.preventDefault(),$("#modal-incart").foundation("close"),!1});var r=null;$(".listingFilter").on("keyup",'input[type="text"]',function(){r&&clearTimeout(r),r=setTimeout(function(){catalogUpdate(!0,!1)},500)}).on("change",'input[type="checkbox"], input[type="radio"], select',function(){catalogUpdate(!0,!1)});var n=null;$('.modalIncart input[name="amount"]').on("keyup change",function(){var e=$(this),t=e.val();t<=0&&(t=1),n&&clearTimeout(n),n=setTimeout(function(){var a=e.closest("form").attr("action");a+="?amount="+t,ajaxLink(e,a,function(e){updateBasketInformer(e.summary.amount)});var r=$(".cartCard__price");r.html(fl2str(t*r.attr("data-price"),2," ")+'<span class="fa fa-rouble"></span>')},400)}),$('.cartList input[name="amount"]').on("keyup change",function(){var e=$(this),t=e.closest(".cartCard"),a=e.val();a<=0&&(a=1),n&&clearTimeout(n);var r=e.closest("form").attr("action");r+="?amount="+a,n=setTimeout(function(){ajaxLink(e,r,function(e){var a=null;for(var r in e.items.item)e.items.item[r].id==t.attr("data-id")&&(a=e.items.item[r]);updateBasketInformer(e.summary.amount),updateBasketTotalPrice(e.summary.price.actual),$(".cartCard__price",t).html(fl2str(a["total-price"].actual,2," ")+'<span class="fa fa-rouble"></span>')})},400)}).on("keypress",function(e){if(13==e.which)return!1}),$(".cartList .cartCard__delete").on("click",function(e){e.preventDefault();var t=$(this).closest(".cartCard"),a=$(this).attr("data-url");ajaxLink($(this),a,function(e){updateBasketInformer(e.summary.amount),updateBasketTotalPrice(e.summary.price.actual),t.remove(),0==$(".cartList .cartCard").length&&($(".cartForm").hide(),$(".cartList").text("В корзине нет ни одного товара"))})}),$(".cart_delivery a").on("click",function(){$("#delivery_type_sup_2").foundation("toggle");var e=$(this).text();$(".cartForm__deliveryTarget span").text(e);var t=new Date;t.setTime(t.getTime()+2592e6);var a="; expires="+t.toUTCString();document.cookie="cart_delivery="+$(this).parent().attr("data-id")+a+"; path=/",setTimeout(function(){updateBasketTotalPrice()},400)}),$(".purchasing_delivery a").on("click",function(){$("#delivery_type_sup_2").foundation("toggle");var e=$(this).text(),t=$(this).parent().attr("data-id");$(".cartForm__deliveryTarget span").text(e);var a=new Date;a.setTime(a.getTime()+2592e6);var r="; expires="+a.toUTCString();document.cookie="cart_delivery="+t+r+"; path=/",$('input[type="radio"]',$(this)).prop("checked",!0),1017==t?(formClear($(".cartForm__addressForm")),$('input[name="delivery-address"]').prop("checked",!1)):$('input[name="delivery-address"]').prop("checked",!0),setTimeout(function(){updateBasketTotalPrice()},400)}),$(".cart_payment a").on("click",function(){$("#payment_type_sup_2").foundation("toggle");var e=$(this).text();$(".cartForm__paymentTarget span").text(e);var t=new Date;t.setTime(t.getTime()+2592e6);var a="; expires="+t.toUTCString();document.cookie="cart_payment="+$(this).parent().attr("data-id")+a+"; path=/",setTimeout(function(){updateBasketTotalPrice()},400)}),$(".purchasing_payment a").on("click",function(){$("#payment_type_sup_2").foundation("toggle");var e=$(this).text(),t=$(this).parent().attr("data-id");$(".cartForm__paymentTarget span").text(e);var a=new Date;a.setTime(a.getTime()+2592e6);var r="; expires="+a.toUTCString();document.cookie="cart_payment="+t+r+"; path=/",$('input[type="radio"]',$(this)).prop("checked",!0)}),$("form.purchasing").ajaxValidFormSender({show_loader:!0,hideForm:!1,show_errors:"global",parentErrorClass:"formGroup__error",ajax:{need:!1},onAjaxSendSuccess:function(e,t,a){}}),$('input[name="amount"]').on("keypress",function(e){return!(e.which>31&&(e.which<48||e.which>57)&&44!=e.which&&46!=e.which&&97!=e.which&&99!=e.which&&118!=e.which)}),$("body").on("click","a[disabled]",function(e){e.preventDefault()}),$(".show_more_categories").on("click",function(e){return e.preventDefault(),$(".catalogGrid .column-block").show(),$(this).remove(),!1}),$('a.scroll_to[href^="#"]').on("click",function(e){var t=$(this.getAttribute("href"));t.length&&(e.preventDefault(),$("html, body").stop().animate({scrollTop:t.offset().top},1e3))}),$(".calculate").on("click",function(){var e=$("#calculator"),t=$(this).closest("form"),a=parseInt(e.attr("data-price")),r=$('input[name="data[new][length]"]',t),n=$('input[name="data[new][width]"]',t),o=$('input[name="data[new][height]"]',t),i=$('input[name="data[new][number]"]',t),s=parseInt(r.val()),l=parseInt(n.val()),c=parseInt(o.val()),d=parseInt(i.val()),u=!1;if(s||(u=!0,r.parent().addClass("formGroup__error")),l||(u=!0,n.parent().addClass("formGroup__error")),c||(u=!0,o.parent().addClass("formGroup__error")),d||(u=!0,i.parent().addClass("formGroup__error")),u)return!1;s/=1e3,l/=1e3,c/=1e3;var p=s*l*c*d*a,h={50000:"10",100000:"15",150000:"20"},f=0,m=0;for(var v in h)v<p&&(f=h[v]);f&&(m=f/100*p),m?($(".order_price",t).html(fl2str(p,0," ")+' <span class="fa fa-rouble"></span>').parent().show(),$(".order_discount",t).html(fl2str(m,0," ")+' <span class="fa fa-rouble"></span>').parent().show(),$(".cartForm__total h3",t).html("Сумма заказа со скидкой:"),$(".order_item_price",t).html(fl2str(s*l*c*a,0," ")+' <span class="fa fa-rouble"></span>')):($(".order_price",t).parent().hide(),$(".order_discount",t).parent().hide(),$(".cartForm__total h3",t).html("Сумма заказа:"));var _=fl2str(p-m,0," ");$(".cartForm__total .sum",t).html(_+' <span class="fa fa-rouble"></span>'),$('input[name="data[new][price]"]',t).val(_),$('input[name="data[new][discount]"]',t).val(m),$(".step-result",t).show(),$(".step-text",t).hide()}),$(".show-step-form").on("click",function(){$(".step-form").show(),$(".step-calculator").hide(),$(this).hide(),$(".show-step-calculator").show()}),$(".show-step-calculator").on("click",function(){$(".step-form").hide(),$(".step-result").hide(),$(".step-calculator").show(),$(".show-step-form").show(),$(".step-text").show(),$(this).hide()}),$("#modal-video-banner").on("open.zf.reveal",function(){var e,t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;e=t>1e3?"728px":t>800?"600px":t>640?"400px":"300px",$("#modal-video-banner").prepend('<iframe id="youTubeIframe" height="'+e+'" width="100%" src="https://www.youtube.com/embed/aTHmGS4tP1U?autoplay=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>')}).on("closed.zf.reveal",function(){$("#youTubeIframe").remove()});var o=$("#order_roistat_id");getCookie("roistat_visit")?(o.length>0&&o.val(getCookie("roistat_visit")),$('meta[name="_roistat"]').attr("content",getCookie("roistat_visit"))):window.roistatVisitCallback=function(e){o.length>0&&o.val(e),$('meta[name="_roistat"]').attr("content",e)}});var sending=!1;